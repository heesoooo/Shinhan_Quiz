<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>C_퀴즈응시</title>
	<link rel="stylesheet" href="../../css/shinhan-quiz.min.css">
</head>
<body>
	<!-- header -->
	<header class="header">
		<img src="https://rebehayan3.cafe24.com/hunet/resource/img.hunet.co.kr/edu/customize/online-baeum/pc/@header.png" alt="헤더">
	</header>
	<!-- /header -->

	<main>
		<!-- snb -->
		<div class="snb">
			<h2>온라인교육</h2>
			<nav>
				<ul>
					<li>메뉴1</li>
					<li>메뉴2</li>
				</ul>
			</nav>
		</div>
		<!-- /snb -->

		<!-- contents -->
		<div class="contents">
			<h2 class="h2">합리적인 소비</h2>
			<!-- Quiz -->
			<div class="quiz-module q-draggble">
				<!-- inner -->
				<div class="quiz-inner">
					<h3 class="quiz-tit">
						무엇에 돈을 쓸지 어떻게 결정하나요?
						<span>
							합리적인 소비를 위해서는 원하는 것을 구분하는 것이 중요합니다.
						</span>
					</h3>
					
					<div class="quiz-cont">
						<!-- tit -->
						<h4 class="quiz-s-tit">퀴즈</h4>
						<!-- /tit -->
						
						<!-- descrition -->
						<div class="q-desc">
							<p>아래는 돈을 사용하는 목록입니다. <strong>각 항목을 선택</strong>하여 올바른 위치에 <strong>드래그</strong>해 보세요!</p>

							<h5>소비품목</h5>
							<ul class="cate-lst">
								<li><strong>NEED</strong> 우리의 생활에 꼭 필요한 품목</li>
								<li><strong>WANT</strong> 즐거움을 위해 갖고 싶은 품목</li>
							</ul>
						</div>
						<!-- /descrition -->
						
						<!-- item -->
						<div class="q-items">
							<ul>
								<li><span class="item prod_01" id="1" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="T"></span><em>의복</em></li>
								<li><span class="item prod_02" id="2" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="T"></span><em>약</em></li>
								<li><span class="item prod_03" id="3" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="F"></span><em>게임기</em></li>
								<li><span class="item prod_04" id="4" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="F"></span><em>슈퍼카</em></li>
								<li><span class="item prod_05" id="5" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="T"></span><em>신발</em></li>
								<li><span class="item prod_06" id="6" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="F"></span><em>외식</em></li>
								<li><span class="item prod_07" id="7" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="F"></span><em>최신스마트폰</em></li>
								<li><span class="item prod_08" id="8" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="T"></span><em>도수있는안경</em></li>
								<li><span class="item prod_09" id="9" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="F"></span><em>반려동물</em></li>
								<li><span class="item prod_10" id="10" ondragstart="dragStart(event);" draggable="true" ondragend="dragEnd(event)" data-value="T"></span><em>전기</em></li>
							</ul>
						</div>
						<!-- /item -->
					</div>
					
					<div class="drag-drop-zone">
						<!-- Needs -->
						<div class="bucket">
							<h4 class="quiz-s-tit">Needs</h4>
							<ul class="drop-lst">
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem1(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem1(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem1(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem1(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem1(event);"></li>
							</ul>
						</div>
						<!-- / Needs -->

						<!-- Wants -->
						<div class="bucket">
							<h4 class="quiz-s-tit">Wants</h4>
							<ul class="drop-lst">
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem2(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem2(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem2(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem2(event);"></li>
								<li ondragover="allowDrop(event);" onDragLeave="dragLeave(event);" ondrop="dropItem2(event);"></li>
							</ul>
						</div>
						<!-- /Wants -->
					</div>

				</div>
				<!-- /inner -->

				<!-- 오답시에 popup -->
				<div class="modal quiz-alert" id="quizIncorrect" aria-hidden="false">
					<div class="modal-content" style="width:428px;margin-top:100px">
						<p>
							아쉽지만 오답이에요!<br>
							다시 선택해주세요!
						</p>
						<div class="btn-wrap">
							<a href="#" class="modal-btn btn-close" onclick="quizBackStep(event)">확인</a>
						</div>
					</div>
				</div>
				<!-- //popup -->
			</div>
			<!-- /Quiz -->
		</div>
		<!-- /contents -->
	</main>

	<!-- footer -->
	<footer class="footer">
		<img src="https://rebehayan3.cafe24.com/hunet/resource/img.hunet.co.kr/edu/customize/online-baeum/pc/@footer.png" alt="푸터">
	</footer>
	<!-- /footer -->

	<!-- 퀴즈중단팝업 -->
	<div class="modal quiz-alert" id="quizRestart" aria-hidden="false">
		<div class="modal-content" style="width:428px">
			<p>
				퀴즈를 멈추시겠습니까?<br>
				중단 시 처음부터 다시 시작해야해요!
			</p>
			<div class="btn-wrap">
				<a href="#" class="modal-btn btn-default">네</a>
				<a href="#" class="modal-btn btn-close" data-dismiss="modal">아니요</a>
			</div>
		</div>
	</div>
	<!-- /퀴즈중단팝업 -->

	<script src="../js/jquery-1.8.3.min.js"></script>
	<script src="../js/common.js"></script>
	<script>

		$(function(){

			allowDrop = function() {
				event.preventDefault();
				event.target.closest('.bucket').classList.add('active');
			};

			dropItem1 = function() {
				var _targetEle = event.target;
				var _id = event.dataTransfer.getData('text');
				var _moveEle = document.getElementById(_id);
				
				if (_moveEle.dataset.value == "T") {
					_targetEle.appendChild(_moveEle);
					_moveEle.removeAttribute('draggable');
					_moveEle.removeAttribute('ondragend');
					_targetEle.closest('.bucket').classList.remove('active');
					_targetEle.parentNode.parentNode.classList.add("correct");
					
					if(_targetEle.parentNode.getElementsByClassName('item').length < "5") {
						setTimeout(function(event){
							_targetEle.parentNode.parentNode.classList.remove("correct");
						}, 500)
					}
					
					if (_targetEle.getElementsByClassName('item').length == "1") {
						_targetEle.removeAttribute('ondragover');
					}
					
					// 정답 팝업 띄우기
					if(_targetEle.parentNode.getElementsByClassName('item').length == "5"){
						_targetEle.parentNode.parentNode.classList.add('correct');
					}
				} else {
					_targetEle.closest('.bucket').classList.remove('active');
					
					// 오답 팝업 띄우기
					_targetEle.closest('.bucket').classList.add('incorrect');
					$('#quizIncorrect').modal({ show: true });
				}

			};

			dropItem2 = function() {
				var _targetEle = event.target;
				var _id = event.dataTransfer.getData('text');
				var _moveEle = document.getElementById(_id);

				if (_moveEle.dataset.value == "F") {
					_targetEle.appendChild(_moveEle);
					_moveEle.removeAttribute('draggable');
					_moveEle.removeAttribute('ondragend');

					_targetEle.closest('.bucket').classList.remove('active');
					_targetEle.parentNode.parentNode.classList.add("correct");

					if(_targetEle.parentNode.getElementsByClassName('item').length < "5") {
						setTimeout(function(event){
							_targetEle.parentNode.parentNode.classList.remove("correct");
						}, 500)
					}

					if (_targetEle.getElementsByClassName('item').length == "1") {
						_targetEle.removeAttribute('ondragover');
					}
					// 정답 팝업 띄우기
					if(_targetEle.parentNode.getElementsByClassName('item').length == "5"){
						_targetEle.parentNode.parentNode.classList.add("correct");
					}
				} else {
					_targetEle.closest('.bucket').classList.remove('active');

					// 오답 팝업 띄우기
					_targetEle.closest('.bucket').classList.add("incorrect");
					$('#quizIncorrect').modal({ show: true });
				}
			};

			dragStart = function() {
				var _thisEle = event.target;
				var _thisId = _thisEle.id;
				_thisEle.classList.add('is-dragging');
				event.dataTransfer.setData('text/plain', _thisId);
			};

			dragEnd = function() {
				return false;
				var _thisEle = event.target;
				_thisEle.classList.remove('is-dragging');
			};

			dragLeave = function() {
				var _thisEle = event.target;
				_thisEle.closest('.bucket').classList.remove('active');
			};

			quizBackStep  = function(event){
				event.preventDefault();
				$('.bucket').removeClass('incorrect');
				$('body').removeClass('modal-open');
				$('.modal-backdrop').hide();
				$('.modal').hide();
			};

			/* 다른페이지 이동시 팝업 */
			$('#quizRestart').modal({ show: true });

		})
	</script>
</body>
</html>